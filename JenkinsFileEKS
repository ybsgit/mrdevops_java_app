
pipeline{

agent any 

stages{
    stage('Create ECR'){
       agent{
        docker{
          image "hashicorp/terraform"
          reuseNode true 
          args  '--entrypoint=""'
       }
       }
       steps{
                        sh """
                        ls -la
                        cd eks_module 
                        terraform init 
                        terraform plan --var-file=config/terraform.tfvars 
                        terraform apply --var-file=config/terraform.tfvars --auto-approve
                        """
       }
    }
}
}